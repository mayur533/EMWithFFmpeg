================================================================================
            HOME SCREEN API REQUIREMENTS - BACKEND GUIDE
================================================================================
                    Date: October 15, 2025
                    Priority: HIGH
================================================================================

SUMMARY:
The Home Screen displays 11 greeting template categories. This is achieved
by making 11 parallel search requests to the SAME API endpoint with different
search query parameters.

================================================================================
THE ONE API THAT POWERS 11 CATEGORIES
================================================================================

Endpoint: GET /api/mobile/greetings/templates/search
Query Parameter: ?q={search_query}

This SINGLE endpoint is called 11 times with different search terms:

1. ?q=motivational
2. ?q=good morning
3. ?q=business ethics
4. ?q=devotional
5. ?q=leader quotes
6. ?q=atmanirbhar bharat
7. ?q=good thoughts
8. ?q=trending
9. ?q=bhagvat gita
10. ?q=books
11. ?q=celebrates the moments

================================================================================
HOW THE HOME SCREEN WORKS
================================================================================

Implementation: src/screens/HomeScreen.tsx (lines 365-377)

Code:
```javascript
const [
  motivationalResponse,
  goodMorningResponse,
  businessEthicsResponse,
  devotionalResponse,
  leaderQuotesResponse,
  atmanirbharBharatResponse,
  goodThoughtsResponse,
  trendingResponse,
  bhagvatGitaResponse,
  booksResponse,
  celebratesResponse
] = await Promise.allSettled([
  greetingTemplatesService.searchTemplates('motivational'),
  greetingTemplatesService.searchTemplates('good morning'),
  greetingTemplatesService.searchTemplates('business ethics'),
  greetingTemplatesService.searchTemplates('devotional'),
  greetingTemplatesService.searchTemplates('leader quotes'),
  greetingTemplatesService.searchTemplates('atmanirbhar bharat'),
  greetingTemplatesService.searchTemplates('good thoughts'),
  greetingTemplatesService.searchTemplates('trending'),
  greetingTemplatesService.searchTemplates('bhagvat gita'),
  greetingTemplatesService.searchTemplates('books'),
  greetingTemplatesService.searchTemplates('celebrates the moments')
]);
```

What this does:
- Makes 11 API calls simultaneously using Promise.allSettled()
- Each call searches for a different category keyword
- If a search returns results, that category is displayed
- If a search returns empty array, that category is hidden
- Only first 10 results per category are displayed

================================================================================
API REQUEST EXAMPLES
================================================================================

Example 1: Motivation Category
-------------------------------
Request:
  GET /api/mobile/greetings/templates/search?q=motivational

Expected Response:
  {
    "success": true,
    "data": {
      "templates": [
        {
          "id": "greeting1",
          "title": "Stay Motivated Daily",
          "description": "Inspirational motivational quote",
          "imageUrl": "/uploads/greetings/motivational1.jpg",
          "category": "motivational",
          "downloads": 156,
          "isPremium": false,
          "createdAt": "2024-01-15T10:30:00.000Z"
        },
        {
          "id": "greeting2",
          "title": "Success Motivation",
          "description": "Motivational success message",
          "imageUrl": "/uploads/greetings/motivational2.jpg",
          "category": "motivational",
          "downloads": 234,
          "isPremium": false,
          "createdAt": "2024-01-14T10:30:00.000Z"
        }
      ]
    },
    "message": "Search results"
  }

Example 2: Good Morning Category
---------------------------------
Request:
  GET /api/mobile/greetings/templates/search?q=good morning

Expected Response:
  {
    "success": true,
    "data": {
      "templates": [
        {
          "id": "greeting10",
          "title": "Beautiful Good Morning",
          "description": "Start your day with positivity",
          "imageUrl": "/uploads/greetings/goodmorning1.jpg",
          "category": "good-morning",
          "downloads": 567,
          "isPremium": false,
          "createdAt": "2024-01-15T10:30:00.000Z"
        }
      ]
    },
    "message": "Search results"
  }

Example 3: Empty Results
------------------------
Request:
  GET /api/mobile/greetings/templates/search?q=category-with-no-results

Response:
  {
    "success": true,
    "data": {
      "templates": []
    },
    "message": "No results found"
  }

Frontend Behavior: Category section won't be displayed on home screen

================================================================================
BACKEND IMPLEMENTATION REQUIREMENTS
================================================================================

1. SEARCH FUNCTIONALITY
   - Must support case-insensitive search
   - Should search in: title, description, category, tags
   - Must return relevant results for each search term

2. SEARCH TERMS TO SUPPORT (11 categories)
   ✓ "motivational" - Motivational quotes and messages
   ✓ "good morning" - Morning greetings
   ✓ "business ethics" - Business ethics content
   ✓ "devotional" - Religious/spiritual content
   ✓ "leader quotes" - Leadership quotes
   ✓ "atmanirbhar bharat" - Self-reliant India theme
   ✓ "good thoughts" - Positive thoughts and wisdom
   ✓ "trending" - Trending or popular templates
   ✓ "bhagvat gita" - Bhagavad Gita quotes
   ✓ "books" - Book-related content
   ✓ "celebrates the moments" - Celebration messages

3. RESPONSE FORMAT
   - Must match the standard search response format
   - Include all template fields (id, title, description, imageUrl, category, downloads, isPremium)
   - Return empty templates array if no results (don't return error)

4. PERFORMANCE
   - Must handle 11 simultaneous requests
   - Optimize database queries (use indexes on searchable fields)
   - Consider caching frequently searched terms
   - Response time should be < 1 second per request

5. DATA REQUIREMENTS
   - Each category should have at least 10+ templates
   - Templates should be tagged/categorized properly
   - Search should be fuzzy enough to match relevant content
   - Consider using full-text search or search engine

================================================================================
TESTING REQUIREMENTS
================================================================================

Backend Team Should Test:

Single Search:
□ Search for "motivational" returns relevant templates
□ Search for "good morning" returns morning greetings
□ Search for "business ethics" returns ethics content
□ Search for each of the 11 categories
□ Case-insensitive search works ("Motivation" = "motivation")
□ Empty results handled gracefully (returns empty array)

Concurrent Requests:
□ 11 simultaneous requests don't cause performance issues
□ No race conditions
□ No timeout errors
□ Response times acceptable (< 1s per request)

Response Format:
□ All responses match the standard format
□ Image URLs are correct
□ All required fields present
□ Pagination works (if implemented)

Content Quality:
□ Each category has relevant content
□ Search results are accurate
□ Templates are properly categorized/tagged
□ No duplicate results across categories

================================================================================
EXAMPLE HOME SCREEN API CALLS
================================================================================

When user opens Home Screen, these 11 API calls are made:

1. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=motivational
2. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=good%20morning
3. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=business%20ethics
4. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=devotional
5. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=leader%20quotes
6. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=atmanirbhar%20bharat
7. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=good%20thoughts
8. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=trending
9. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=bhagvat%20gita
10. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=books
11. GET https://eventmarketersbackend.onrender.com/api/mobile/greetings/templates/search?q=celebrates%20the%20moments

Note: Spaces in search terms are URL encoded (%20)

================================================================================
DATABASE CONTENT STRUCTURE
================================================================================

Recommended Database Structure:

Templates Table:
- id (primary key)
- title (indexed for search)
- description (indexed for full-text search)
- imageUrl
- category (indexed)
- tags (array/json, indexed if possible)
- downloads (counter)
- isPremium (boolean)
- createdAt
- updatedAt

Recommended Tags for Categories:
- Motivation: ["motivational", "motivation", "inspiration", "quotes", "success"]
- Good Morning: ["good-morning", "morning", "greeting", "sunrise"]
- Business Ethics: ["business", "ethics", "professional", "corporate"]
- Devotional: ["devotional", "spiritual", "religious", "faith"]
- Leader Quotes: ["leadership", "quotes", "leaders", "inspiration"]
- AtmaNirbher Bharat: ["atmanirbhar", "bharat", "india", "self-reliant"]
- Good Thoughts: ["thoughts", "wisdom", "positive", "mindfulness"]
- Trending: ["trending", "popular", "viral", "hot"]
- Bhagvat Gita: ["bhagavad-gita", "gita", "hindu", "scripture"]
- Books: ["books", "reading", "literature", "knowledge"]
- Celebrates the Moments: ["celebration", "moments", "joy", "happiness"]

Search Implementation Example:
```sql
SELECT * FROM greeting_templates 
WHERE 
  LOWER(title) LIKE LOWER('%motivational%') OR
  LOWER(description) LIKE LOWER('%motivational%') OR
  LOWER(category) LIKE LOWER('%motivational%') OR
  tags LIKE '%motivational%'
ORDER BY downloads DESC
LIMIT 50;
```

================================================================================
PERFORMANCE OPTIMIZATION
================================================================================

Recommended Optimizations:

1. Database Indexes:
   CREATE INDEX idx_templates_title ON greeting_templates(title);
   CREATE INDEX idx_templates_category ON greeting_templates(category);
   CREATE INDEX idx_templates_downloads ON greeting_templates(downloads);
   CREATE FULLTEXT INDEX idx_templates_search ON greeting_templates(title, description);

2. Caching:
   - Cache search results for 5-10 minutes
   - Use Redis or in-memory cache
   - Key format: "search:{query}"

3. Query Optimization:
   - Use LIMIT clause (max 50 per search)
   - Use prepared statements
   - Consider using Elasticsearch for better search

4. Rate Limiting:
   - Home screen makes 11 requests at once
   - Don't count this as 11 separate rate limit hits
   - Consider grouping by IP/user for rate limiting

================================================================================
FRONTEND BEHAVIOR
================================================================================

Display Logic:
- If category has 0 results → Section NOT displayed
- If category has 1-9 results → Display all results
- If category has 10+ results → Display first 10, show "Browse All" button
- User can tap "Browse All" to see full greeting templates screen

Loading States:
- Shows loading indicator while fetching
- Uses Promise.allSettled() so one failed request doesn't break others
- Each category loads independently

Error Handling:
- If API returns empty array → Category hidden
- If API returns error → Category hidden (graceful degradation)
- No error message shown to user for missing categories

================================================================================
CONTENT REQUIREMENTS FOR EACH CATEGORY
================================================================================

For the home screen to look good:

Minimum Content Per Category: 5 templates
Recommended Content Per Category: 10-20 templates
Ideal Content Per Category: 20+ templates

Priority Categories (must have content):
1. Good Morning (most used)
2. Motivational (popular)
3. Trending (social proof)
4. Celebrates the Moments (emotional connection)

Secondary Categories:
5. Devotional
6. Leader Quotes
7. Good Thoughts
8. Bhagvat Gita

Niche Categories:
9. Business Ethics
10. AtmaNirbher Bharat
11. Books

================================================================================
API CALL FREQUENCY
================================================================================

When are these APIs called:
- On Home Screen mount/load
- On pull-to-refresh
- When user returns from another screen

Average Frequency: 
- Per user: 5-10 times per day
- Total: Depends on active users × 10 calls per day × 11 searches = high volume

Example: 
- 1000 active users
- 10 home screen loads per user per day
- = 10,000 × 11 = 110,000 API calls per day for greeting categories

Recommendation: Implement caching and optimize queries!

================================================================================
SUCCESS CRITERIA
================================================================================

Home Screen is successful when:
□ All 11 categories return results (at least 5 templates each)
□ Search response time < 1 second
□ Images load properly (URLs are valid)
□ 11 simultaneous requests don't cause timeouts
□ Categories display relevant content (search is accurate)
□ Cache works properly (reduces duplicate searches)

================================================================================
TROUBLESHOOTING GUIDE
================================================================================

Issue: Category not showing on home screen
Solution: 
  - Check if search query returns results
  - Verify search term matches template tags/categories
  - Check template data exists in database

Issue: Slow loading
Solution:
  - Add database indexes
  - Implement caching
  - Optimize search queries
  - Consider CDN for images

Issue: All categories empty
Solution:
  - Check API endpoint is accessible
  - Verify database has greeting templates
  - Check search functionality works
  - Review backend logs for errors

Issue: Some categories work, others don't
Solution:
  - Check content availability for each category
  - Verify tags/categories are set correctly
  - Test each search query individually

================================================================================
ALTERNATIVE APPROACH (RECOMMENDED)
================================================================================

Instead of 11 search requests, consider creating a dedicated endpoint:

Endpoint: GET /api/mobile/home/greeting-categories
Query: ?limit={number per category}

Response:
{
  "success": true,
  "data": {
    "motivational": [...],
    "goodMorning": [...],
    "businessEthics": [...],
    "devotional": [...],
    "leaderQuotes": [...],
    "atmanirbharBharat": [...],
    "goodThoughts": [...],
    "trending": [...],
    "bhagvatGita": [...],
    "books": [...],
    "celebratesMoments": [...]
  },
  "message": "Categories fetched successfully"
}

Benefits:
  ✓ Single API call instead of 11
  ✓ Better performance
  ✓ Easier to cache
  ✓ Reduced server load
  ✓ Atomic operation (all or nothing)

However, current implementation (11 separate calls) works fine and is
already implemented on frontend.

================================================================================
MONITORING RECOMMENDATIONS
================================================================================

Metrics to Track:
- Average response time per search query
- Cache hit rate for search queries
- Most searched terms
- Empty result rate per category
- Concurrent request handling

Alerts:
- Alert if response time > 2 seconds
- Alert if error rate > 5%
- Alert if any category consistently returns 0 results
- Alert if concurrent requests cause timeouts

================================================================================
CONTACT & REFERENCES
================================================================================

Frontend Implementation:
  - src/screens/HomeScreen.tsx (lines 365-439)
  - src/services/greetingTemplates.ts (searchTemplates method)

API Documentation:
  - ACTUAL_IMPLEMENTED_APIS.txt (Section 5.4)
  - Endpoint: GET /api/mobile/greetings/templates/search

Search Terms Used:
  motivational, good morning, business ethics, devotional, leader quotes,
  atmanirbhar bharat, good thoughts, trending, bhagvat gita, books,
  celebrates the moments

================================================================================
END OF DOCUMENT
================================================================================
Last Updated: October 15, 2025
Status: Frontend implemented, backend needs content for all categories
Priority: HIGH - Home screen depends on these searches
Note: This is ONE API called 11 times, not 11 different APIs
================================================================================

